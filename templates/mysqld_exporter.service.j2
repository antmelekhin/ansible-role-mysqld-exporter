{{ ansible_managed | comment }}

[Unit]
Description=Prometheus MySQL Exporter
After=network.target

[Service]
Type=simple
Restart=always
User={{ mysqld_exporter_user }}
Group={{ mysqld_exporter_group }}
ExecStart={{ mysqld_exporter_install_path }}/mysqld_exporter \
    --web.listen-address={{ mysqld_exporter_web_listen_address }}:{{ mysqld_exporter_web_listen_port }} \
    --web.telemetry-path {{ mysqld_exporter_web_telemetry_path }} \
    --config.my-cnf {{ mysqld_exporter_config_path }}/.mysqld_exporter.cnf \
{% for collect in mysqld_exporter_collect -%}
    --{{ collect }} \
{% endfor -%}
    --log.level {{ mysqld_exporter_log_level }}

[Install]
WantedBy=multi-user.target
